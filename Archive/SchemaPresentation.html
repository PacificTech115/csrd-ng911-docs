<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Central NG911 SSAP Schema</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Poppins:wght@600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        :root {
            --navy: #0f172a;
            --navy-light: #1e293b;
            --teal: #0d9488;
            --teal-light: #14b8a6;
            --gray: #64748b;
            --light-bg: #f8fafc;
            --accent: #3b82f6;
            --accent-glow: rgba(59, 130, 246, 0.4);
            --white: #ffffff;
            --slide-transition: 0.8s cubic-bezier(0.65, 0, 0.35, 1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: 'Inter', sans-serif;
            background: #080c14;
        }

        /* ── PARTICLES CANVAS ── */
        #particles-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        /* ── SLIDE WRAPPER ── */
        .presentation {
            position: relative;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 60px 100px;
            opacity: 0;
            visibility: hidden;
            transform: scale(0.92) translateY(40px);
            transition:
                opacity var(--slide-transition),
                transform var(--slide-transition),
                visibility 0s linear 0.8s;
            will-change: opacity, transform;
            overflow: hidden;
        }

        .slide.active {
            opacity: 1;
            visibility: visible;
            transform: scale(1) translateY(0);
            transition:
                opacity var(--slide-transition),
                transform var(--slide-transition),
                visibility 0s linear 0s;
        }

        .slide.exit-up {
            opacity: 0;
            transform: scale(0.88) translateY(-60px);
        }

        .slide.exit-down {
            opacity: 0;
            transform: scale(0.88) translateY(60px);
        }

        /* ── BACKGROUND LAYERS ── */
        .slide-bg {
            position: absolute;
            inset: 0;
            z-index: 0;
        }

        .slide-bg::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(ellipse at 30% 20%, rgba(59,130,246,0.06) 0%, transparent 60%),
                        radial-gradient(ellipse at 80% 80%, rgba(13,148,136,0.04) 0%, transparent 50%);
        }

        .slide-bg-grid {
            position: absolute;
            inset: 0;
            background-image: radial-gradient(rgba(148,163,184,0.12) 1px, transparent 1px);
            background-size: 40px 40px;
        }

        .slide-content {
            position: relative;
            z-index: 2;
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* ── ANIMATIONS FOR CHILD ELEMENTS ── */
        .slide .anim {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        .slide.active .anim {
            opacity: 1;
            transform: translateY(0);
        }

        .slide.active .anim.d1 { transition-delay: 0.15s; }
        .slide.active .anim.d2 { transition-delay: 0.3s; }
        .slide.active .anim.d3 { transition-delay: 0.45s; }
        .slide.active .anim.d4 { transition-delay: 0.6s; }
        .slide.active .anim.d5 { transition-delay: 0.75s; }
        .slide.active .anim.d6 { transition-delay: 0.9s; }
        .slide.active .anim.d7 { transition-delay: 1.05s; }

        .slide .anim-left {
            opacity: 0;
            transform: translateX(-50px);
            transition: opacity 0.7s ease, transform 0.7s ease;
        }
        .slide.active .anim-left { opacity: 1; transform: translateX(0); }

        .slide .anim-right {
            opacity: 0;
            transform: translateX(50px);
            transition: opacity 0.7s ease, transform 0.7s ease;
        }
        .slide.active .anim-right { opacity: 1; transform: translateX(0); }

        .slide .anim-scale {
            opacity: 0;
            transform: scale(0.8);
            transition: opacity 0.7s ease, transform 0.7s ease;
        }
        .slide.active .anim-scale { opacity: 1; transform: scale(1); }

        /* ── TYPOGRAPHY ── */
        h1, h2, h3, h4 {
            font-family: 'Poppins', sans-serif;
            color: var(--white);
        }

        .slide-title {
            font-size: 44px;
            font-weight: 700;
            margin-bottom: 50px;
            position: relative;
            padding-left: 24px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            line-height: 1.2;
        }

        .slide-title::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 6px;
            background: linear-gradient(180deg, var(--accent), var(--teal));
            border-radius: 3px;
            box-shadow: 0 0 20px var(--accent-glow);
        }

        p, li {
            font-size: 20px;
            line-height: 1.7;
            color: #cbd5e1;
        }

        li {
            margin-bottom: 14px;
        }

        ul {
            list-style: none;
            padding: 0;
        }

        ul li::before {
            content: '▸';
            color: var(--accent);
            font-weight: bold;
            margin-right: 12px;
        }

        strong {
            color: var(--white);
        }

        /* ── LAYOUT ── */
        .two-col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 70px;
            align-items: center;
        }

        /* ── TITLE SLIDE ── */
        .title-slide {
            text-align: center;
            justify-content: center;
            align-items: center;
            background: radial-gradient(ellipse at center, #111827 0%, #080c14 100%);
        }

        .logo-badge {
            display: inline-flex;
            align-items: center;
            gap: 16px;
            padding: 18px 40px;
            border-radius: 60px;
            background: linear-gradient(135deg, var(--accent), #6366f1);
            color: white;
            font-family: 'Poppins', sans-serif;
            font-weight: 800;
            font-size: 28px;
            letter-spacing: 2px;
            box-shadow: 0 0 60px rgba(59,130,246,0.3), 0 20px 40px rgba(0,0,0,0.3);
            margin-bottom: 50px;
        }

        .logo-badge i {
            font-size: 32px;
        }

        .title-slide h1 {
            font-size: 68px;
            font-weight: 800;
            line-height: 1.1;
            letter-spacing: -1px;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #ffffff 0%, #94a3b8 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .title-slide h1 span {
            background: linear-gradient(135deg, var(--accent), var(--teal-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .title-slide .subtitle {
            font-size: 22px;
            color: #64748b;
            max-width: 700px;
            margin: 0 auto;
            font-weight: 300;
        }

        /* ── TREE / ARCHITECTURE DIAGRAM ── */
        .arch-tree {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .tree-node {
            padding: 18px 36px;
            border-radius: 16px;
            color: white;
            text-align: center;
            position: relative;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .tree-node.navy-node {
            background: linear-gradient(135deg, var(--navy-light), #334155);
            box-shadow: 0 10px 40px rgba(15,23,42,0.5);
            min-width: 320px;
        }

        .tree-node.teal-node {
            background: linear-gradient(135deg, var(--teal), var(--teal-light));
            box-shadow: 0 10px 40px rgba(13,148,136,0.3);
            min-width: 320px;
        }

        .tree-node.muni-node {
            background: linear-gradient(135deg, #334155, #475569);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
            min-width: 140px;
            padding: 14px 20px;
        }

        .tree-node-title {
            font-weight: 700;
            font-size: 20px;
        }

        .tree-node-sub {
            font-size: 13px;
            opacity: 0.85;
            margin-top: 4px;
        }

        .tree-connector {
            width: 2px;
            height: 30px;
            background: linear-gradient(180deg, var(--accent), transparent);
        }

        .tree-h-line {
            width: 80%;
            max-width: 750px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--gray), transparent);
        }

        .muni-row {
            display: flex;
            gap: 16px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 8px;
        }

        .legend-panel {
            position: absolute;
            bottom: 50px;
            right: 80px;
            background: rgba(15,23,42,0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255,255,255,0.08);
            padding: 20px 28px;
            border-radius: 16px;
        }

        .legend-row {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
            font-size: 14px;
            color: #94a3b8;
            font-weight: 600;
        }

        .legend-dot {
            width: 14px;
            height: 14px;
            border-radius: 4px;
        }

        /* ── TILE GRID ── */
        .tile-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 28px;
        }

        .tile {
            background: rgba(30,41,59,0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.06);
            padding: 36px 30px;
            border-radius: 20px;
            transition: transform 0.4s ease, box-shadow 0.4s ease;
        }

        .tile:hover {
            transform: translateY(-6px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .tile i {
            font-size: 38px;
            margin-bottom: 20px;
            display: block;
            background: linear-gradient(135deg, var(--accent), var(--teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .tile h3 {
            font-size: 22px;
            margin-bottom: 14px;
        }

        .tile p {
            font-size: 17px;
            color: #94a3b8;
        }

        /* ── ICON PANEL (image placeholder) ── */
        .icon-panel {
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 20px;
            min-height: 320px;
            background: linear-gradient(135deg, rgba(30,41,59,0.5), rgba(15,23,42,0.8));
            border: 1px solid rgba(255,255,255,0.06);
        }

        .icon-panel i {
            font-size: 110px;
            background: linear-gradient(135deg, var(--accent), var(--teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            opacity: 0.4;
        }

        /* ── STACK PANELS ── */
        .stack-panel {
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255,255,255,0.06);
        }

        .stack-dark { background: linear-gradient(135deg, var(--navy-light), #1a2332); }
        .stack-glass { background: rgba(30,41,59,0.4); backdrop-filter: blur(10px); }

        .stack-row {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 12px;
            background: rgba(255,255,255,0.04);
            border: 1px solid rgba(255,255,255,0.04);
            transition: background 0.3s ease;
        }

        .stack-row:hover {
            background: rgba(255,255,255,0.08);
        }

        .stack-row:last-child { margin-bottom: 0; }

        .stack-row i {
            font-size: 26px;
            width: 44px;
            text-align: center;
            color: var(--accent);
        }

        .stack-row .label {
            font-weight: 700;
            font-size: 18px;
            color: var(--white);
        }

        .stack-row .sublabel {
            font-size: 13px;
            color: #64748b;
            margin-top: 2px;
        }

        /* ── WORKFLOW STEPS ── */
        .workflow {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 32px;
        }

        .wf-step {
            text-align: center;
            padding: 36px 28px;
            border-radius: 20px;
            width: 280px;
            background: rgba(30,41,59,0.5);
            border: 1px solid rgba(255,255,255,0.06);
            backdrop-filter: blur(10px);
            transition: transform 0.4s ease, box-shadow 0.4s ease;
        }

        .wf-step:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .wf-step.highlight {
            border-color: var(--teal);
            box-shadow: 0 0 40px rgba(13,148,136,0.15);
        }

        .wf-step.filled {
            background: linear-gradient(135deg, var(--teal), var(--teal-light));
            border-color: transparent;
        }

        .wf-step i {
            font-size: 28px;
            margin-bottom: 14px;
            display: block;
        }

        .wf-step h4 {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .wf-step p {
            font-size: 15px;
        }

        .wf-arrow {
            font-size: 28px;
            color: #475569;
        }

        /* ── GOVERNANCE DARK CARD ── */
        .gov-card {
            background: linear-gradient(135deg, var(--navy-light), #0c1220);
            border: 1px solid rgba(255,255,255,0.06);
            border-radius: 20px;
            padding: 40px;
        }

        .gov-card h3 {
            color: var(--white);
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 16px;
            margin-bottom: 24px;
            font-size: 24px;
        }

        /* ── NENA COMPLIANCE TILES ── */
        .nena-tile h3 {
            background: linear-gradient(135deg, var(--accent), var(--teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* ── CLOSING SLIDE ── */
        .closing-slide {
            text-align: center;
            background: radial-gradient(ellipse at center, var(--navy-light) 0%, #080c14 100%);
        }

        .closing-slide h2 {
            font-size: 72px;
            margin-bottom: 16px;
            background: linear-gradient(135deg, #ffffff, #94a3b8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .contact-box {
            display: inline-block;
            margin-top: 60px;
            padding: 40px 60px;
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.08);
            background: rgba(255,255,255,0.03);
            backdrop-filter: blur(10px);
        }

        .contact-box .email {
            font-size: 30px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent), var(--teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-top: 8px;
        }

        /* ── NAVIGATION UI ── */
        .nav-controls {
            position: fixed;
            bottom: 32px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 16px;
            z-index: 100;
            padding: 10px 24px;
            border-radius: 40px;
            background: rgba(15,23,42,0.75);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255,255,255,0.08);
        }

        .nav-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 1px solid rgba(255,255,255,0.15);
            background: rgba(255,255,255,0.05);
            color: #94a3b8;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
            box-shadow: 0 0 20px var(--accent-glow);
        }

        .slide-dots {
            display: flex;
            gap: 8px;
        }

        .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255,255,255,0.15);
            cursor: pointer;
            transition: all 0.4s ease;
        }

        .dot.active {
            background: var(--accent);
            box-shadow: 0 0 12px var(--accent-glow);
            transform: scale(1.3);
        }

        .dot:hover:not(.active) {
            background: rgba(255,255,255,0.35);
        }

        .slide-counter {
            color: #64748b;
            font-size: 13px;
            font-weight: 600;
            min-width: 46px;
            text-align: center;
            font-variant-numeric: tabular-nums;
        }

        /* ── TOP PROGRESS BAR ── */
        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent), var(--teal));
            box-shadow: 0 0 16px var(--accent-glow);
            z-index: 200;
            transition: width 0.5s cubic-bezier(0.65, 0, 0.35, 1);
        }

        /* ── SIDE NAV ARROWS ── */
        .side-nav {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            z-index: 100;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(15,23,42,0.5);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.08);
            color: #94a3b8;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: all 0.3s ease;
            opacity: 0.6;
        }

        .side-nav:hover {
            opacity: 1;
            background: var(--accent);
            color: white;
            box-shadow: 0 0 30px var(--accent-glow);
        }

        .side-nav.left { left: 24px; }
        .side-nav.right { right: 24px; }

        /* ── KEYBOARD HINT ── */
        .kbd-hint {
            position: fixed;
            bottom: 90px;
            left: 50%;
            transform: translateX(-50%);
            color: #475569;
            font-size: 12px;
            z-index: 100;
            opacity: 1;
            transition: opacity 1s ease;
            pointer-events: none;
        }

        .kbd-hint.hidden { opacity: 0; }

        kbd {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            border: 1px solid #334155;
            background: rgba(30,41,59,0.6);
            font-family: inherit;
            font-size: 11px;
            margin: 0 2px;
        }

        /* ── SLIDE 1 → 2 SEAMLESS TRANSITION ── */
        .slide.title-exit {
            opacity: 0;
            visibility: hidden;
            transform: scale(1) translateY(0);
            transition:
                opacity 1s cubic-bezier(0.4, 0, 0.2, 1),
                visibility 0s linear 1s;
        }

        .slide.title-exit .slide-content > * {
            transition: opacity 0.6s ease, transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .slide.title-exit .slide-content > *:nth-child(1) {
            opacity: 0;
            transform: translateY(-40px) scale(0.9);
            transition-delay: 0s;
        }

        .slide.title-exit .slide-content > *:nth-child(2) {
            opacity: 0;
            transform: translateY(-20px);
            transition-delay: 0.08s;
        }

        .slide.title-exit .slide-content > *:nth-child(3) {
            opacity: 0;
            transform: translateY(-10px);
            transition-delay: 0.15s;
        }

        .slide.title-enter {
            opacity: 1;
            visibility: visible;
            transform: scale(1) translateY(0);
            transition:
                opacity 0.9s cubic-bezier(0.4, 0, 0.2, 1) 0.25s,
                transform 0s,
                visibility 0s;
        }

        .slide.title-enter-prep {
            opacity: 0;
            visibility: visible;
            transform: scale(1) translateY(0);
            transition: none;
        }

        .slide.slide-2-reverse-exit {
            opacity: 0;
            transform: scale(1) translateY(0);
            transition:
                opacity 0.7s cubic-bezier(0.4, 0, 0.2, 1),
                visibility 0s linear 0.7s;
        }

        .slide.slide-2-reverse-exit .slide-content > * {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.5s ease, transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .slide.title-return {
            opacity: 1;
            visibility: visible;
            transform: scale(1) translateY(0);
            transition:
                opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.2s,
                visibility 0s;
        }

        .slide.title-return-prep {
            opacity: 0;
            visibility: visible;
            transform: scale(1) translateY(0);
            transition: none;
        }

        /* ── SLIDE 2 → 3 MORPH (DEFAULT node zoom) ── */
        #slide2DefaultNode {
            cursor: pointer;
            transition: transform 0.4s ease, box-shadow 0.4s ease;
        }

        #slide2DefaultNode:hover {
            transform: scale(1.06);
            box-shadow: 0 16px 50px rgba(59,130,246,0.25), 0 10px 40px rgba(15,23,42,0.5);
        }

        .default-hint {
            font-size: 11px;
            color: rgba(255,255,255,0.35);
            margin-top: 10px;
            letter-spacing: 1px;
            text-transform: uppercase;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        #slide2DefaultNode:hover .default-hint {
            opacity: 1;
        }

        #morph-overlay-2 {
            position: fixed;
            z-index: 500;
            pointer-events: none;
            border-radius: 16px;
            color: white;
            text-align: center;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            background: linear-gradient(135deg, var(--navy-light), #334155);
            box-shadow: 0 10px 40px rgba(15,23,42,0.5);
            font-family: 'Poppins', sans-serif;
            transition: none;
            will-change: top, left, width, height, border-radius, box-shadow, opacity;
            overflow: hidden;
        }

        #morph-overlay-2.animating {
            display: flex;
            transition:
                top 1s cubic-bezier(0.4, 0, 0.15, 1),
                left 1s cubic-bezier(0.4, 0, 0.15, 1),
                width 1s cubic-bezier(0.4, 0, 0.15, 1),
                height 1s cubic-bezier(0.4, 0, 0.15, 1),
                border-radius 1s cubic-bezier(0.4, 0, 0.15, 1),
                box-shadow 1s cubic-bezier(0.4, 0, 0.15, 1);
        }

        #morph-overlay-2 .morph-inner {
            transition: opacity 0.3s ease;
        }

        #morph-overlay-2 .morph-icon { font-size: 22px; margin-bottom: 8px; }
        #morph-overlay-2 .morph-title { font-weight: 700; font-size: 20px; }
        #morph-overlay-2 .morph-sub { font-size: 13px; opacity: 0.85; margin-top: 4px; }

        .slide.morph-exit-2 .slide-content > * {
            transition: opacity 0.45s ease, transform 0.45s ease;
        }

        .slide.morph-exit-2.fade-rest .slide-content > * {
            opacity: 0;
            transform: scale(0.96);
        }

        .slide.morph-exit-2.fade-rest .slide-content .arch-tree #slide2DefaultNode {
            opacity: 0;
            transform: scale(1);
        }

        .slide.morph-enter-3 .slide-content > * {
            opacity: 0;
            transform: translateY(20px);
        }

        .slide.morph-enter-3.reveal-3 .slide-content > * {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        .slide.morph-enter-3.reveal-3 .slide-content > *:nth-child(1) { transition-delay: 0.05s; }
        .slide.morph-enter-3.reveal-3 .slide-content > *:nth-child(2) { transition-delay: 0.2s; }

        /* ── RESPONSIVE ── */
        @media (max-width: 1200px) {
            .slide { padding: 40px 60px; }
            .title-slide h1 { font-size: 48px; }
            .slide-title { font-size: 34px; }
            .two-col { grid-template-columns: 1fr; gap: 30px; }
            .tile-grid { grid-template-columns: 1fr 1fr; }
            .workflow { flex-wrap: wrap; }
        }

        @media (max-width: 768px) {
            .slide { padding: 30px; }
            .title-slide h1 { font-size: 36px; }
            .tile-grid { grid-template-columns: 1fr; }
            .muni-row { flex-direction: column; align-items: center; }
        }
    </style>
</head>

<body>

    <canvas id="particles-canvas"></canvas>
    <div class="progress-bar" id="progressBar"></div>

    <div class="presentation" id="presentation">

        <!-- SLIDE 1: TITLE -->
        <div class="slide title-slide active" data-index="0">
            <div class="slide-bg"><div class="slide-bg-grid"></div></div>
            <div class="slide-content" style="display:flex;flex-direction:column;align-items:center;">
                <div class="anim d1 logo-badge">
                    <i class="fa-solid fa-map-location-dot"></i>
                    <span>NG9-1-1</span>
                </div>
                <h1 class="anim d2">Central SSAP Schema<br><span>& Data Entry Guide</span></h1>
                <p class="anim d3 subtitle">Professional reference for data stewardship, quality assurance, and consistent multi-agency editing workflows.</p>
            </div>
        </div>

        <!-- SLIDE 2: ARCHITECTURE DIAGRAM -->
        <div class="slide" data-index="1">
            <div class="slide-bg"><div class="slide-bg-grid"></div></div>
            <div class="slide-content">
                <h2 class="slide-title anim d1">Central Address Data Structure</h2>
                <div class="arch-tree">
                    <div class="tree-node navy-node anim anim-scale d2" id="slide2DefaultNode" onclick="morphToSlide3(event)">
                        <i class="fa-solid fa-database" style="font-size:22px;margin-bottom:8px;display:block;"></i>
                        <div class="tree-node-title">SDE.NG911 SiteAddress</div>
                        <div class="tree-node-sub">Authoritative Feature Class</div>
                        <div class="default-hint">Click to explore ▸</div>
                    </div>
                    <div class="tree-connector anim d3"></div>
                    <div class="tree-node teal-node anim anim-scale d4">
                        <i class="fa-solid fa-gears" style="font-size:22px;margin-bottom:8px;display:block;"></i>
                        <div class="tree-node-title">Attribute Rules</div>
                        <div class="tree-node-sub">Auto-Calculated Fields</div>
                    </div>
                    <div class="tree-connector anim d5"></div>
                    <div class="tree-h-line anim d5"></div>
                    <div class="muni-row">
                        <div class="tree-node muni-node anim d5"><i class="fa-solid fa-city" style="display:block;margin-bottom:4px;"></i>CSRD</div>
                        <div class="tree-node muni-node anim d5" style="transition-delay:0.8s"><i class="fa-solid fa-city" style="display:block;margin-bottom:4px;"></i>Salmon Arm</div>
                        <div class="tree-node muni-node anim d6"><i class="fa-solid fa-city" style="display:block;margin-bottom:4px;"></i>Sicamous</div>
                        <div class="tree-node muni-node anim d6" style="transition-delay:0.95s"><i class="fa-solid fa-city" style="display:block;margin-bottom:4px;"></i>Golden</div>
                        <div class="tree-node muni-node anim d7"><i class="fa-solid fa-city" style="display:block;margin-bottom:4px;"></i>Revelstoke</div>
                    </div>
                </div>
                <div class="legend-panel anim d7">
                    <div class="legend-row"><div class="legend-dot" style="background:var(--navy-light);"></div>Core Table</div>
                    <div class="legend-row"><div class="legend-dot" style="background:var(--teal);"></div>Automation</div>
                    <div class="legend-row"><div class="legend-dot" style="background:#475569;"></div>Editors</div>
                </div>
            </div>
        </div>

        <!-- SLIDE 3: PRODUCTION ENVIRONMENT -->
        <div class="slide" data-index="2">
            <div class="slide-bg"><div class="slide-bg-grid"></div></div>
            <div class="slide-content">
                <h2 class="slide-title anim d1">SDE.NG911 SiteAddress</h2>
                <div class="two-col">
                    <div class="anim-left d2" style="transition-delay:0.3s;">
                        <h3 style="margin-bottom:24px;font-size:26px;">Quick Start for Editors</h3>
                        <ul>
                            <li><strong>Agency:</strong> The owning agency label (e.g. Salmon Arm).</li>
                            <li><strong>DiscrpAgID:</strong> Stable agency domain identifier (e.g. salmonarm.ca).</li>
                            <li><strong>Add Number & St Name:</strong> The core civic number and street name.</li>
                            <li><strong>A3 (Locality):</strong> Must match the AddCode lookup exactly.</li>
                        </ul>
                    </div>
                    <div class="icon-panel anim-right d3" style="transition-delay:0.5s;">
                        <i class="fa-solid fa-bolt"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 4: QA VALIDATION GATE -->
        <div class="slide" data-index="3">
            <div class="slide-bg"><div class="slide-bg-grid"></div></div>
            <div class="slide-content">
                <h2 class="slide-title anim d1">Multi-Agency Conventions</h2>
                <div class="tile-grid">
                    <div class="tile anim d2">
                        <i class="fa-solid fa-users"></i>
                        <h3>Agency Ownership</h3>
                        <p>The Agency field represents who owns/maintains the record. Used for web maps and QA dashboards.</p>
                    </div>
                    <div class="tile anim d3">
                        <i class="fa-solid fa-id-card"></i>
                        <h3>DiscrpAgID</h3>
                        <p>Agency domain embedded in NGUID. Must be stable and consistent per agency.</p>
                    </div>
                    <div class="tile anim d4">
                        <i class="fa-solid fa-link"></i>
                        <h3>Domains</h3>
                        <p>For example, CSRD uses "csrd.bc.ca", Revelstoke uses "revelstoke.ca".</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 5: MUNICIPAL INTEGRATION -->
        <div class="slide" data-index="4">
            <div class="slide-bg"><div class="slide-bg-grid"></div></div>
            <div class="slide-content">
                <h2 class="slide-title anim d1">Key Attribute Rules</h2>
                <div class="two-col">
                    <div class="icon-panel anim-left d2" style="transition-delay:0.3s;">
                        <i class="fa-solid fa-calculator"></i>
                    </div>
                    <div class="anim-right d3" style="transition-delay:0.5s;">
                        <h3 style="margin-bottom:24px;font-size:26px;">Auto-Filled on Save</h3>
                        <p style="margin-bottom:24px;">These fields are automatically computed and should be read-only in editing views:</p>
                        <ul>
                            <li><strong>Full Addr:</strong> Built from Unit, civic number, street, locality, province, and postal.</li>
                            <li><strong>NGUID:</strong> Globally Unique ID requiring DiscrpAgID and GlobalID.</li>
                            <li><strong>AddCode:</strong> Derived from A3 using a fixed lookup table.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 6: PLATFORM STACK -->
        <div class="slide" data-index="5">
            <div class="slide-bg"><div class="slide-bg-grid"></div></div>
            <div class="slide-content">
                <h2 class="slide-title anim d1">Web Form Structure</h2>
                <div class="two-col">
                    <div class="stack-panel stack-dark anim-left d2" style="transition-delay:0.3s;">
                        <div class="stack-row">
                            <i class="fa-solid fa-star"></i>
                            <div>
                                <div class="label">Quick Entry</div>
                                <div class="sublabel">Agency, DiscrpAgID, Add Number, St Name</div>
                            </div>
                        </div>
                        <div class="stack-row">
                            <i class="fa-solid fa-road"></i>
                            <div>
                                <div class="label">Street Components</div>
                                <div class="sublabel">St PreDir, St PreTyp, St PosTyp, St PosDir</div>
                            </div>
                        </div>
                        <div class="stack-row">
                            <i class="fa-solid fa-map"></i>
                            <div>
                                <div class="label">Jurisdiction & Postal</div>
                                <div class="sublabel">Country, A1, A2, Post Comm, Post Code</div>
                            </div>
                        </div>
                    </div>
                    <div class="stack-panel stack-glass anim-right d3" style="transition-delay:0.5s;">
                        <div class="stack-row">
                            <i class="fa-solid fa-building" style="color:var(--teal);"></i>
                            <div>
                                <div class="label">Unit / Interior</div>
                                <div class="sublabel">Building, Floor, Room, Seat</div>
                            </div>
                        </div>
                        <div class="stack-row">
                            <i class="fa-solid fa-clock" style="color:var(--teal);"></i>
                            <div>
                                <div class="label">Effective Dates & Notes</div>
                                <div class="sublabel">Effective, Expire, Addressnotes, Featureid</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 7: ARCGIS PRO WORKFLOW -->
        <div class="slide" data-index="6">
            <div class="slide-bg"><div class="slide-bg-grid"></div></div>
            <div class="slide-content">
                <h2 class="slide-title anim d1">Street Components</h2>
                <div class="two-col">
                    <div class="anim-left d2" style="transition-delay:0.3s;">
                        <h3 style="margin-bottom:24px;font-size:26px;">No Abbreviations</h3>
                        <p style="margin-bottom:24px;">For NENA street component fields, abbreviations are strictly not accepted.</p>
                        <ul>
                            <li><strong>Directionals:</strong> Use full words like "Southwest", "North" (not SW or N).</li>
                            <li><strong>Types:</strong> Use full types like "Road", "Street", "Avenue" (not Rd, St, Ave).</li>
                            <li><strong>Pre/Post:</strong> Applies to Pre Directional, Pre Type, Post Type, Post Directional.</li>
                        </ul>
                    </div>
                    <div class="icon-panel anim-right d3" style="transition-delay:0.5s;">
                        <i class="fa-solid fa-signs-post"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 8: EXPERIENCE BUILDER -->
        <div class="slide" data-index="7">
            <div class="slide-bg"><div class="slide-bg-grid"></div></div>
            <div class="slide-content">
                <h2 class="slide-title anim d1">Jurisdiction & Communities</h2>
                <div class="two-col">
                    <div class="icon-panel anim-left d2" style="transition-delay:0.3s;">
                        <i class="fa-solid fa-earth-americas"></i>
                    </div>
                    <div class="anim-right d3" style="transition-delay:0.5s;">
                        <h3 style="margin-bottom:24px;font-size:26px;">Standard Regional Fields</h3>
                        <p style="margin-bottom:24px;">Consistency is critical for routing and mapping across boundaries.</p>
                        <ul>
                            <li><strong>Country & A1 (Province):</strong> Typically default to "CA" and "BC".</li>
                            <li><strong>A2 (Regional District):</strong> E.g. Columbia Shuswap Regional District.</li>
                            <li><strong>A3 (Locality):</strong> Must precisely match the AddCode lookup values.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 9: RECONCILE & POST -->
        <div class="slide" data-index="8">
            <div class="slide-bg"><div class="slide-bg-grid"></div></div>
            <div class="slide-content" style="text-align:center;">
                <h2 class="slide-title anim d1" style="text-align:left;">What Happens on Save</h2>
                <div class="workflow" style="margin-top:40px;">
                    <div class="wf-step anim d2">
                        <i class="fa-solid fa-pen-nib" style="color:#94a3b8;"></i>
                        <h4>1. Input</h4>
                        <p>User enters core civic and street data.</p>
                    </div>
                    <i class="fa-solid fa-arrow-right wf-arrow anim d3"></i>
                    <div class="wf-step highlight anim d4">
                        <i class="fa-solid fa-gears" style="color:var(--teal);"></i>
                        <h4 style="color:var(--teal);">2. Execute</h4>
                        <p>Arcade attribute rules fire automatically.</p>
                    </div>
                    <i class="fa-solid fa-arrow-right wf-arrow anim d5"></i>
                    <div class="wf-step filled anim d6">
                        <i class="fa-solid fa-check-double" style="color:white;"></i>
                        <h4>3. Output</h4>
                        <p style="color:rgba(255,255,255,0.9);">NGUID, Full Addr, AddCode, Lat/Long are generated.</p>
                    </div>
                </div>
                <p class="anim d7" style="margin-top:60px;font-style:italic;color:#64748b;font-size:20px;">
                    Ensures NENA data compliance dynamically on every edit.
                </p>
            </div>
        </div>

        <!-- SLIDE 10: GOVERNANCE -->
        <div class="slide" data-index="9">
            <div class="slide-bg"><div class="slide-bg-grid"></div></div>
            <div class="slide-content">
                <h2 class="slide-title anim d1">Quality Check Status</h2>
                <div class="two-col">
                    <div class="anim-left d2" style="transition-delay:0.3s;">
                        <h3 style="margin-bottom:20px;font-size:24px;">QAStatus Rule</h3>
                        <p style="margin-bottom:30px;">An optional automated rule to track record quality and pending reviews.</p>
                        <h3 style="margin-bottom:20px;font-size:24px;">Workflow Reset</h3>
                        <p>Defaults to Pending on new records. Resets to Pending when key business fields change.</p>
                    </div>
                    <div class="gov-card anim-right d3" style="transition-delay:0.5s;">
                        <h3>System Fields</h3>
                        <ul>
                            <li style="color:#cbd5e1;">OBJECTID, GlobalID</li>
                            <li style="color:#cbd5e1;">Editor tracking (created_user, last_edited_date)</li>
                            <li style="color:#cbd5e1;">Shape (NAD 1983 UTM Zone 11N)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 11: NENA COMPLIANCE -->
        <div class="slide" data-index="10">
            <div class="slide-bg"><div class="slide-bg-grid"></div></div>
            <div class="slide-content">
                <h2 class="slide-title anim d1">Typical Data Entry Examples</h2>
                <div class="tile-grid">
                    <div class="tile nena-tile anim d2">
                        <i class="fa-solid fa-house"></i>
                        <h3>Single-Family</h3>
                        <p>Only requires Add Number, St Name, St PosTyp, A3, Agency, and DiscrpAgID.</p>
                    </div>
                    <div class="tile nena-tile anim d3">
                        <i class="fa-solid fa-building-user"></i>
                        <h3>Multi-Unit</h3>
                        <p>Same as single-family, but requires the Unit field (e.g., "12" or "A") to be populated.</p>
                    </div>
                    <div class="tile nena-tile anim d4">
                        <i class="fa-solid fa-map-pin"></i>
                        <h3>Highway Address</h3>
                        <p>St PreTyp = "Highway", St Name = "1", A3 = Locality name.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 12: QUESTIONS -->
        <div class="slide closing-slide" data-index="11">
            <div class="slide-bg"><div class="slide-bg-grid"></div></div>
            <div class="slide-content" style="display:flex;flex-direction:column;align-items:center;">
                <h2 class="anim d1">Questions?</h2>
                <p class="anim d2" style="font-size:22px;color:#64748b;">Central NG911 SSAP Schema Guide</p>
                <div class="contact-box anim d3">
                    <p style="font-weight:600;color:#94a3b8;">Author Contact:</p>
                    <p class="email">John Soliman, Pacific Tech Systems</p>
                </div>
            </div>
        </div>

    </div>

    <!-- NAVIGATION UI -->
    <button class="side-nav left" id="prevBtn" onclick="changeSlide(-1)">
        <i class="fa-solid fa-chevron-left"></i>
    </button>
    <button class="side-nav right" id="nextBtn" onclick="changeSlide(1)">
        <i class="fa-solid fa-chevron-right"></i>
    </button>

    <div class="nav-controls">
        <button class="nav-btn" onclick="changeSlide(-1)"><i class="fa-solid fa-chevron-left"></i></button>
        <div class="slide-dots" id="slideDots"></div>
        <span class="slide-counter" id="slideCounter">1 / 12</span>
        <button class="nav-btn" onclick="changeSlide(1)"><i class="fa-solid fa-chevron-right"></i></button>
    </div>

    <div id="morph-overlay-2">
        <div class="morph-inner">
            <i class="fa-solid fa-database morph-icon"></i>
            <div class="morph-title">SDE.NG911 SiteAddress</div>
            <div class="morph-sub">Authoritative Feature Class</div>
        </div>
    </div>

    <div class="kbd-hint" id="kbdHint">
        Use <kbd>←</kbd> <kbd>→</kbd> or <kbd>Space</kbd> to navigate
    </div>

    <script>
        // ── Slide Engine ──
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;
        let currentSlide = 0;
        let isTransitioning = false;

        function initDots() {
            const dotsContainer = document.getElementById('slideDots');
            for (let i = 0; i < totalSlides; i++) {
                const dot = document.createElement('div');
                dot.className = 'dot' + (i === 0 ? ' active' : '');
                dot.addEventListener('click', () => goToSlide(i));
                dotsContainer.appendChild(dot);
            }
        }

        function updateUI() {
            const dots = document.querySelectorAll('.dot');
            dots.forEach((d, i) => d.classList.toggle('active', i === currentSlide));

            document.getElementById('slideCounter').textContent =
                `${currentSlide + 1} / ${totalSlides}`;

            const pct = ((currentSlide + 1) / totalSlides) * 100;
            document.getElementById('progressBar').style.width = pct + '%';

            document.getElementById('prevBtn').style.opacity = currentSlide === 0 ? '0.2' : '';
            document.getElementById('prevBtn').style.pointerEvents = currentSlide === 0 ? 'none' : '';
            document.getElementById('nextBtn').style.opacity = currentSlide === totalSlides - 1 ? '0.2' : '';
            document.getElementById('nextBtn').style.pointerEvents = currentSlide === totalSlides - 1 ? 'none' : '';
        }
        function goToSlide(index) {
            if (index === currentSlide || isTransitioning) return;

            const fromSlide1to2 = currentSlide === 0 && index === 1;
            const fromSlide2to1 = currentSlide === 1 && index === 0;
            const fromSlide2to3 = currentSlide === 1 && index === 2;
            const fromSlide3to2 = currentSlide === 2 && index === 1;

            if (fromSlide1to2) { seamlessForward(); return; }
            if (fromSlide2to1) { seamlessReverse(); return; }
            if (fromSlide2to3) { morphTransition2to3(); return; }
            if (fromSlide3to2) { morphTransition3to2(); return; }

            isTransitioning = true;
            const direction = index > currentSlide ? 'up' : 'down';
            const oldSlide = slides[currentSlide];
            const newSlide = slides[index];

            oldSlide.classList.add(direction === 'up' ? 'exit-up' : 'exit-down');
            oldSlide.classList.remove('active');

            newSlide.classList.add('active');
            newSlide.classList.remove('exit-up', 'exit-down');

            currentSlide = index;
            updateUI();

            setTimeout(() => {
                oldSlide.classList.remove('exit-up', 'exit-down');
                isTransitioning = false;
            }, 850);
        }

        function seamlessForward() {
            isTransitioning = true;
            const slide1 = slides[0];
            const slide2 = slides[1];

            slide2.classList.add('title-enter-prep');
            slide2.classList.remove('exit-up', 'exit-down');

            requestAnimationFrame(() => {
                slide1.classList.remove('active');
                slide1.classList.add('title-exit');

                requestAnimationFrame(() => {
                    slide2.classList.remove('title-enter-prep');
                    slide2.classList.add('title-enter');
                });
            });

            currentSlide = 1;
            updateUI();

            setTimeout(() => {
                slide2.classList.remove('title-enter');
                slide2.classList.add('active');
                slide1.classList.remove('title-exit');
                isTransitioning = false;
            }, 1200);
        }

        function seamlessReverse() {
            isTransitioning = true;
            const slide2 = slides[1];
            const slide1 = slides[0];

            slide1.classList.add('title-return-prep');

            requestAnimationFrame(() => {
                slide2.classList.remove('active');
                slide2.classList.add('slide-2-reverse-exit');

                requestAnimationFrame(() => {
                    slide1.classList.remove('title-return-prep');
                    slide1.classList.add('title-return');
                });
            });

            currentSlide = 0;
            updateUI();

            setTimeout(() => {
                slide1.classList.remove('title-return');
                slide1.classList.add('active');
                slide2.classList.remove('slide-2-reverse-exit');
                isTransitioning = false;
            }, 1100);
        }

        function morphToSlide3(e) {
            e.stopPropagation();
            if (currentSlide !== 1 || isTransitioning) return;
            goToSlide(2);
        }

        function morphTransition2to3() {
            isTransitioning = true;
            const overlay = document.getElementById('morph-overlay-2');
            const sourceNode = document.getElementById('slide2DefaultNode');
            const slide2 = slides[1];
            const slide3 = slides[2];
            const inner = overlay.querySelector('.morph-inner');

            const srcRect = sourceNode.getBoundingClientRect();

            overlay.style.transition = 'none';
            overlay.style.top = srcRect.top + 'px';
            overlay.style.left = srcRect.left + 'px';
            overlay.style.width = srcRect.width + 'px';
            overlay.style.height = srcRect.height + 'px';
            overlay.style.borderRadius = '16px';
            overlay.classList.remove('animating');
            overlay.style.display = 'flex';
            inner.style.opacity = '1';

            sourceNode.style.opacity = '0';

            slide2.classList.add('morph-exit-2');
            requestAnimationFrame(() => {
                slide2.classList.add('fade-rest');
            });

            setTimeout(() => {
                slide2.classList.remove('active');

                overlay.classList.add('animating');
                requestAnimationFrame(() => {
                    overlay.style.top = '0px';
                    overlay.style.left = '0px';
                    overlay.style.width = '100vw';
                    overlay.style.height = '100vh';
                    overlay.style.borderRadius = '0px';
                    overlay.style.boxShadow = '0 0 80px rgba(59,130,246,0.2)';
                });

                setTimeout(() => {
                    inner.style.opacity = '0';
                }, 500);

                setTimeout(() => {
                    slide3.classList.add('active', 'morph-enter-3');

                    requestAnimationFrame(() => {
                        slide3.classList.add('reveal-3');
                    });

                    setTimeout(() => {
                        overlay.style.display = 'none';
                        overlay.classList.remove('animating');
                        overlay.style.boxShadow = '';

                        slide2.classList.remove('morph-exit-2', 'fade-rest');
                        slide3.classList.remove('morph-enter-3', 'reveal-3');
                        sourceNode.style.opacity = '';

                        currentSlide = 2;
                        updateUI();
                        isTransitioning = false;
                    }, 700);
                }, 850);
            }, 400);
        }

        function morphTransition3to2() {
            isTransitioning = true;
            const overlay = document.getElementById('morph-overlay-2');
            const targetNode = document.getElementById('slide2DefaultNode');
            const slide3 = slides[2];
            const slide2 = slides[1];
            const inner = overlay.querySelector('.morph-inner');

            overlay.style.transition = 'none';
            overlay.style.top = '0px';
            overlay.style.left = '0px';
            overlay.style.width = '100vw';
            overlay.style.height = '100vh';
            overlay.style.borderRadius = '0px';
            overlay.classList.remove('animating');
            overlay.style.display = 'flex';
            inner.style.opacity = '0';

            slide3.classList.add('exit-up');
            slide3.classList.remove('active');

            setTimeout(() => {
                slide2.classList.add('active');
                targetNode.style.opacity = '0';

                inner.style.opacity = '1';
                inner.style.transition = 'opacity 0.3s ease';

                requestAnimationFrame(() => {
                    const tgtRect = targetNode.getBoundingClientRect();

                    overlay.classList.add('animating');
                    requestAnimationFrame(() => {
                        overlay.style.top = tgtRect.top + 'px';
                        overlay.style.left = tgtRect.left + 'px';
                        overlay.style.width = tgtRect.width + 'px';
                        overlay.style.height = tgtRect.height + 'px';
                        overlay.style.borderRadius = '16px';
                        overlay.style.boxShadow = '0 10px 40px rgba(15,23,42,0.5)';
                    });
                });

                setTimeout(() => {
                    targetNode.style.opacity = '1';
                    overlay.style.display = 'none';
                    overlay.classList.remove('animating');
                    overlay.style.boxShadow = '';
                    inner.style.transition = '';

                    slide3.classList.remove('exit-up');

                    currentSlide = 1;
                    updateUI();
                    isTransitioning = false;
                }, 1100);
            }, 350);
        }

        function changeSlide(dir) {
            const next = currentSlide + dir;
            if (next < 0 || next >= totalSlides) return;
            goToSlide(next);
        }

        // ── Keyboard Navigation ──
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === 'ArrowDown' || e.key === ' ') {
                e.preventDefault();
                changeSlide(1);
            } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
                e.preventDefault();
                changeSlide(-1);
            } else if (e.key === 'Home') {
                e.preventDefault();
                goToSlide(0);
            } else if (e.key === 'End') {
                e.preventDefault();
                goToSlide(totalSlides - 1);
            }

            document.getElementById('kbdHint').classList.add('hidden');
        });

        // ── Mouse Wheel Navigation ──
        let wheelTimeout;
        document.addEventListener('wheel', (e) => {
            clearTimeout(wheelTimeout);
            wheelTimeout = setTimeout(() => {
                if (e.deltaY > 30) changeSlide(1);
                else if (e.deltaY < -30) changeSlide(-1);
            }, 80);
        }, { passive: true });

        // ── Touch Navigation ──
        let touchStartY = 0;
        document.addEventListener('touchstart', e => {
            touchStartY = e.touches[0].clientY;
        }, { passive: true });

        document.addEventListener('touchend', e => {
            const diff = touchStartY - e.changedTouches[0].clientY;
            if (Math.abs(diff) > 50) {
                changeSlide(diff > 0 ? 1 : -1);
            }
        }, { passive: true });

        // ── Hide keyboard hint after delay ──
        setTimeout(() => {
            document.getElementById('kbdHint').classList.add('hidden');
        }, 6000);

        // ── Particle Background ──
        (function initParticles() {
            const canvas = document.getElementById('particles-canvas');
            const ctx = canvas.getContext('2d');
            let w, h, particles = [];
            const PARTICLE_COUNT = 60;
            const MAX_DIST = 140;

            function resize() {
                w = canvas.width = window.innerWidth;
                h = canvas.height = window.innerHeight;
            }

            function createParticle() {
                return {
                    x: Math.random() * w,
                    y: Math.random() * h,
                    vx: (Math.random() - 0.5) * 0.4,
                    vy: (Math.random() - 0.5) * 0.4,
                    r: Math.random() * 2 + 0.5,
                    alpha: Math.random() * 0.4 + 0.1
                };
            }

            function init() {
                resize();
                particles = [];
                for (let i = 0; i < PARTICLE_COUNT; i++) {
                    particles.push(createParticle());
                }
            }

            function draw() {
                ctx.clearRect(0, 0, w, h);

                for (let i = 0; i < particles.length; i++) {
                    const p = particles[i];
                    p.x += p.vx;
                    p.y += p.vy;

                    if (p.x < 0) p.x = w;
                    if (p.x > w) p.x = 0;
                    if (p.y < 0) p.y = h;
                    if (p.y > h) p.y = 0;

                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(59,130,246,${p.alpha})`;
                    ctx.fill();

                    for (let j = i + 1; j < particles.length; j++) {
                        const q = particles[j];
                        const dx = p.x - q.x;
                        const dy = p.y - q.y;
                        const dist = Math.sqrt(dx * dx + dy * dy);
                        if (dist < MAX_DIST) {
                            ctx.beginPath();
                            ctx.moveTo(p.x, p.y);
                            ctx.lineTo(q.x, q.y);
                            ctx.strokeStyle = `rgba(59,130,246,${0.06 * (1 - dist / MAX_DIST)})`;
                            ctx.lineWidth = 0.6;
                            ctx.stroke();
                        }
                    }
                }

                requestAnimationFrame(draw);
            }

            window.addEventListener('resize', resize);
            init();
            draw();
        })();

        // ── Init ──
        initDots();
        updateUI();
    </script>
</body>

</html>
